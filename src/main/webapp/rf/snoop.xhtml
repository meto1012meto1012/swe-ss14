<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:c="http://java.sun.com/jsp/jstl/core"
	  xmlns:r="http://richfaces.org">

<!--
 * Copyright (C) 2013 Juergen Zimmermann, Hochschule Karlsruhe
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

	<ui:composition template="/WEB-INF/resources/templates/desktop/shop.xml">
		<ui:param name="pageTitle" value="Snoop JSF"/>
	
		<ui:define name="main">
			<h3>Memory MXBean</h3>
			<h:panelGrid id="memoryMXBean" columns="2" frame="border" rules="all">
				<h:outputText id="lblHeapMemoryUsage" value="Heap Memory Usage:"/>
				<h:outputText id="valHeapMemoryUsage" value="#{snoop.heapMemoryUsage}"/>
				
				<h:outputText id="lblNonHeapMemoryUsage" value="Non-Heap Memory Usage:"/>
				<h:outputText id="valNonHeapMemoryUsage" value="#{snoop.nonHeapMemoryUsage}"/>
			</h:panelGrid>
			
			<p/>

			<r:dataTable id="tblMemoryPoolMXBeans"
			             var="memoryPoolMXBean"
			             value="#{snoop.memoryPoolMXBeans}">
			    <f:facet name="header">
			    	Memory Pool MXBeans
				</f:facet>

				<r:column id="memoryPoolMXBeanName">
					<f:facet name="header">
						Name
					</f:facet>
					#{memoryPoolMXBean.name}
				</r:column>
				
				<r:column id="memoryPoolMXBeanType">
					<f:facet name="header">
						Type
					</f:facet>
					#{memoryPoolMXBean.type}
				</r:column>
				
				<r:column id="memoryPoolMXBeanUsage">
					<f:facet name="header">
						Usage
					</f:facet>
					#{memoryPoolMXBean.usage}
				</r:column>
				<r:column id="memoryPoolMXBeanPeakUsage">
					<f:facet name="header">
						Peak Usage
					</f:facet>
					#{memoryPoolMXBean.peakUsage}
				</r:column>
				<r:column id="memoryPoolMXBeanCollectionUsage">
					<f:facet name="header">
						Collection Usage
					</f:facet>
					#{memoryPoolMXBean.collectionUsage}
				</r:column>
			</r:dataTable>

			<p/>
			
			<h2>Request information</h2>
			<h:panelGrid id="requestInformation" columns="2" frame="border" rules="all">
				<h:outputText id="lblURL" value="Requested URL:"/>
				<h:outputText id="valURL" value="#{request.requestURL}"/>

				<h:outputText id="lblMethod" value="Request method:"/>
				<h:outputText id="valMethod" value="#{request.method}"/>
				
				<h:outputText id="lblURI" value="Request URI:"/>
				<h:outputText id="valURI" value="#{request.requestURI}"/>
				
				<h:outputText id="lblProtocol" value="Request protocol:"/>
				<h:outputText id="valProtocol" value="#{request.protocol}"/>
				
				<h:outputText id="lblServletPath" value="Servlet path:"/>
				<h:outputText id="valServletPath" value="#{request.servletPath}"/>
				
				<h:outputText id="lblPathInfo" value="Path info:"/>
				<h:outputText id="valPathInfo" value="#{request.pathInfo}"/>
				
				<h:outputText id="lblPathTranslated" value="Path translated:"/>
				<h:outputText id="valPathTranslated" value="#{request.pathTranslated}"/>
				
				<h:outputText id="lblContentLength" value="Content length:"/>
				<h:outputText id="valContentLength" value="#{request.contentLength}"/>
				
				<h:outputText id="lblContentType" value="Content type:"/>
				<h:outputText id="valContentType" value="#{request.contentType}"/>
				
				<h:outputText id="lblServerName" value="Server name:"/>
				<h:outputText id="valServerName" value="#{request.serverName}"/>
				
				<h:outputText id="lblServerPort" value="Server port:"/>
				<h:outputText id="valServerPort" value="#{request.serverPort}"/>
				
				<h:outputText id="lblRemoteUser" value="Remote user:"/>
				<h:outputText id="valRemoteUser" value="#{request.remoteUser}"/>
				
				<h:outputText id="lblRemoteAddr" value="Remote address:"/>
				<h:outputText id="valRemoteAddr" value="#{request.remoteAddr}"/>
				
				<h:outputText id="lblRemoteHost" value="Remote host:"/>
				<h:outputText id="valRemoteHost" value="#{request.remoteHost}"/>
				
				<h:outputText id="lblAuthType" value="Authorization scheme:"/>
				<h:outputText id="valAuthType" value="#{request.authType}"/>
			</h:panelGrid>
			
			<p/>
			
			<r:dataTable id="tblRequestHeader"
			             var="headerName"
			             value="#{snoop.headerNames}"
			             rendered="#{not empty snoop.headerNames}">
			    <f:facet name="header">
			    	Request headers
				</f:facet>

				<r:column id="headerName">
					<f:facet name="header">
						Name
					</f:facet>
					#{headerName}
				</r:column>

				<r:column id="headerValue">
					<f:facet name="header">
						Value
					</f:facet>
					#{request.getHeader(headerName)}
				</r:column>
			</r:dataTable>
			
			<p/>
			
			<r:dataTable id="tblRequestParameter"
			             var="parameterName"
			             value="#{snoop.parameterNames}"
			             rendered="#{not empty snoop.parameterNames}">
			    <f:facet name="header">
			    	Request parameters
				</f:facet>

				<r:column id="parameterName">
					<f:facet name="header">
						Name
					</f:facet>
					#{parameterName}
				</r:column>

				<r:column id="parameterValue">
					<f:facet name="header">
						Value
					</f:facet>
					#{request.getParameter(parameterName)}
				</r:column>

				<r:column id="parameterMultipleValues">
					<f:facet name="header">
						Multiple values
					</f:facet>
					<c:forEach items="#{request.getParameterValues(parameterName)}" var="value">
						#{value}<br/>
					</c:forEach>					
				</r:column>
			</r:dataTable>
			
			<p/>
			
			<r:dataTable id="tblRequestAttributes"
			             var="attributeName"
			             value="#{snoop.attributeNames}"
			             rendered="#{not empty snoop.attributeNames}">
			    <f:facet name="header">
			    	Request attributes
				</f:facet>

				<r:column id="attributeName">
					<f:facet name="header">
						Name
					</f:facet>
					#{attributeName}
				</r:column>

				<r:column id="attributeValue">
					<f:facet name="header">
						Value
					</f:facet>
					#{request.getAttribute(attributeName)}
				</r:column>
			</r:dataTable>
			
			<p/>
			
			<r:dataTable id="tblInitParameters"
			             var="initParameterName"
			             value="#{snoop.initParameterNames}"
			             rendered="#{not empty snoop.initParameterNames}">
			    <f:facet name="header">
			    	Init Parameters
				</f:facet>

				<r:column id="initParameterName">
					<f:facet name="header">
						Name
					</f:facet>
					#{initParameterName}
				</r:column>

				<r:column id="initParameterValue">
					<f:facet name="header">
						Value
					</f:facet>
					#{application.getInitParameter(initParameterName)}
				</r:column>
			</r:dataTable>
		</ui:define>
	</ui:composition>
</html>
