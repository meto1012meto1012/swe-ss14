<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	  xmlns:r="http://richfaces.org"
	  xmlns:s="http://shop.de">
<!--
 * Copyright (C) 2013 Juergen Zimmermann, Hochschule Karlsruhe
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

	<body>
		<ui:composition template="/WEB-INF/resources/templates/desktop/shop.xml">
			<ui:param name="pageTitle" value="#{msgBv['viewBestellung.title']}"/>
		
			<ui:define name="main">
				<c:set var="bestellung" value="#{bestellung}" scope="view"/>
						
				<r:panel id="bestellungMainPanel" header="#{msgBv['viewBestellung.heading']} #{bestellung.id}">
					<section id="bestellungSection">
						<h:panelGrid id="bestellungGrid" columns="2">

							<label id="idLabel">#{msgBv['viewBestellung.id']}</label>
							<h:outputText id="id" value="#{bestellung.id}"/>

							<label id="kundeIdLabel">#{msgBv['viewBestellung.kundeId']}</label>
							<h:outputText id="kundeId" value="#{bestellung.kunde.id}"/>

							<label id="erzeugtLabel">#{msgBv['viewBestellung.zeitstempel']}</label>
							<h:outputText id="erzeugt" value="#{bestellung.erzeugt}">
								<f:convertDateTime type="date" dateStyle="full"/>
							</h:outputText>

							<label id="gesamtbetragLabel">#{msgBv['viewBestellung.gesamtbetrag']}</label>
							<h:outputText id="gesamtbetrag" value="#{bestellung.gesamtbetrag}">
									<f:convertNumber type="currency" currencyCode="EUR" maxFractionDigits="2" minFractionDigits="2"/>
							</h:outputText>
						</h:panelGrid>
					</section>

					<p id="abstand"/>

					<section id="positionenSection">
						<r:dataTable id="positionenTabelle"
									 value="#{s:asList(bestellung.bestellpositionen)}"
									 var="pos">
							<f:facet id="positionenHeader" name="header">
								#{msgBv['viewBestellung.positionen']}
							</f:facet>

							<r:column id="artikelIdSpalte">
								<f:facet name="header">
									#{msgBv['viewBestellung.artikel.id']}
								</f:facet>
								#{pos.artikel.id}
							</r:column>

							<r:column id="bezeichnungSpalte">
								<f:facet name="header">
									#{msgBv['viewBestellung.artikel.bezeichnung']}
								</f:facet>
								#{pos.artikel.bezeichnung}
							</r:column>

							<r:column id="anzahlSpalte">
								<f:facet name="header">
									#{msgBv['viewBestellung.artikel.anzahl']}
								</f:facet>
								#{pos.anzahl}
							</r:column>

							<r:column id="preisSpalte">
								<f:facet name="header">
									#{msgBv['viewBestellung.artikel.preis']}
								</f:facet>
								<h:outputText id="preis" value="#{pos.artikel.preis}">
									<f:convertNumber type="currency" currencyCode="EUR" maxFractionDigits="2" minFractionDigits="2"/>
								</h:outputText>
							</r:column>
						</r:dataTable>
					</section>
				</r:panel>
			</ui:define>
		</ui:composition>
	</body>
</html>
