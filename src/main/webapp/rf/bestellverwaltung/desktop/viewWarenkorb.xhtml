<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:jsf="http://xmlns.jcp.org/jsf"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	  xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp"
	  xmlns:r="http://richfaces.org">
<!--
 * Copyright (C) 2013 Juergen Zimmermann, Hochschule Karlsruhe
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

	<body>
		<ui:composition template="/WEB-INF/resources/templates/desktop/shop.xml">
			<ui:param name="pageTitle" value="#{msgBv['viewWarenkorb.title']}"/>
		
			<ui:define name="main">
				<c:if test="#{not empty warenkorb.positionen}">
					<h1>#{msgBv['viewWarenkorb.heading']}</h1>
					
					<form jsf:id="warenkorbForm" jsf:prependId="false">
						<r:dataTable id="warenkorbTabelle"
						             value="#{warenkorb.positionen}"
						             var="position"
						             rowClasses="odd-row, even-row"
						             styleClass="tabelleMitZebrastil">
							<r:column id="artikelIdSpalte">
								<f:facet name="header">
									#{msgBv['viewWarenkorb.artikel.id']}
								</f:facet>
								#{position.artikel.id}
							</r:column>
							
							<r:column id="bezeichnungSpalte">
								<f:facet name="header">
									#{msgBv['viewWarenkorb.artikel.bezeichnung']}
								</f:facet>
								#{position.artikel.bezeichnung}
							</r:column>
				
							<r:column id="anzahlSpalte">
								<f:facet name="header">
									#{msgBv['viewWarenkorb.anzahl']}
								</f:facet>
								<r:inputNumberSpinner id="anzahl"
							                          value="#{position.anzahl}"
							                          minValue="0"
							                          maxValue="99"
							                          inputSize="2"/>
							</r:column>
							
							<r:column id="preisSpalte">
								<f:facet name="header">
									#{msgBv['viewWarenkorb.artikel.preis']}
								</f:facet>
								<h:outputText id="preis" value="#{position.artikel.preis}">
									<f:convertNumber type="currency" currencyCode="EUR" maxFractionDigits="2" minFractionDigits="2"/>
								</h:outputText>
							</r:column>
				
							<r:column id="deleteButton">
								<a jsf:id="deleteLink" jsf:action="#{warenkorb.remove(position)}" jsf:onclick="return confirm('#{msgBv['viewWarenkorb.deletePositionBestaetigung']}')">
									<img jsf:id="deleteIcon" jsf:name="delete.gif" jsf:library="images" alt="#{msgBv['viewWarenkorb.deleteButtonAlt']}"/>
				        	    </a>
							</r:column>
							
							<f:facet name="footer">
									<input jsf:id="updateButton" type="submit" jsf:action="/rf/artikelverwaltung/listArtikel?init=true" value="#{msgBv['viewWarenkorb.update']}"/>
									#{' '}
									<input jsf:id="resetButton" type="reset" value="#{msgBv['viewWarenkorb.reset']}"/>
									#{' '}
									<input jsf:id="bestellenButton" type="submit" jsf:action="/rf/bestellverwaltung/confirmBestellung" value="#{msgBv['viewWarenkorb.bestellen']}"/>
									<r:message id="bestellenButtonFehlermeldung" for="bestellenButton" rendered="#{authModel.loggedIn}"/>
							</f:facet>
							
						</r:dataTable>
						
						<ez:zebrastil id="zebrastil"/>
					</form>
				</c:if>
			</ui:define>
		</ui:composition>
	</body>
</html>
