<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:jsf="http://xmlns.jcp.org/jsf"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp"
	  xmlns:r="http://richfaces.org">
<!--
 * Copyright (C) 2013 Juergen Zimmermann, Hochschule Karlsruhe
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

	<body>
		<ui:composition template="/WEB-INF/resources/templates/desktop/shop.xml">
			<ui:param name="pageTitle" value="#{msgAuth['updateRollen.title']}"/>
		
			<ui:define name="main">
				<form jsf:id="sucheForm" jsf:prependId="false">
					<section id="sucheSection">
						<r:focus id="rollenFormFocus"/>

						<r:panel id="suchePanel" header="#{msgAuth['updateRollen.headingUsername']}">
							<h:panelGrid id="suchePanelGrid" columns="4">
								<label id="usernameLabel" for="usernameInput">
									#{msgAuth['updateRollen.username']}
								</label>

								<r:autocomplete id="username"
												value="#{authModel.usernameUpdateRollen}"
												mode="cachedAjax"
												minChars="1"
												autocompleteMethod="#{authModel.findUsernameListByUsernamePrefix}"/> 

								<r:commandButton id="findButton"
												 action="#{authModel.findRollenByUsername}"
												 value="#{msgAuth['updateRollen.submit']}"
												 render="rollenPickListPanel fehlermeldungUsername"/>

								<ez:waiting id="inBearbeitung" msg="#{msgAuth['updateRollen.inBearbeitung']}"/>
							</h:panelGrid>

							<r:messages id="fehlermeldungUsername" for="usernameInput"/>
						</r:panel>
					</section>
	
					<r:outputPanel id="rollenPickListPanel">
						<section id="rollenSection">
							<p id="abstandPickList">
								<r:pickList id="rollenPickList"
											value="#{authModel.ausgewaehlteRollen}"
											var="rolle"
											orderable="false"
											sourceCaption="#{msgAuth['updateRollen.verfuegbareRollen']}"
											targetCaption="#{msgAuth['updateRollen.ausgewaehlteRollen']}"
											listHeight="100"
											rendered="#{not empty authModel.ausgewaehlteRollen}">
		<!--
											addAllText="#{msgAuth['updateRollen.addAllText']}"
											addText="#{msgAuth['updateRollen.addText']}"
											removeAllText="#{msgAuth['updateRollen.removeAllText']}"
											removeText="#{msgAuth['updateRollen.removeText']}"
		-->
									<f:selectItems id="selectItems"
												   value="#{authModel.verfuegbareRollen}"/>
									<r:column id="rollenSpalte">
										<!--
										<f:facet name="header">#{msgAuth['updateRollen.rolle']}</f:facet>
										-->
										#{rolle.value}
									</r:column>
								</r:pickList>

								<p id="buttons">
									<input jsf:id="updateButton" type="submit" jsf:action="#{authModel.updateRollen}" value="#{msgAuth['updateRollen.submit']}"/>
								</p>
							</p>
						</section>
					</r:outputPanel>
				</form>
			</ui:define>
		</ui:composition>
	</body>
</html>
