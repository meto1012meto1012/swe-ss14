<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:jsf="http://xmlns.jcp.org/jsf"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:r="http://richfaces.org"
	  xmlns:s="http://shop.de">
<!--
 * Copyright (C) 2013 Juergen Zimmermann, Hochschule Karlsruhe
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

	<body>
		<ui:composition template="/WEB-INF/resources/templates/desktop/shop.xml">
			<ui:define name="metadata">
				<f:event type="preRenderView" listener="#{kundeModel.createEmptyPrivatkunde}"/>
			</ui:define>
			
			<ui:param name="pageTitle" value="#{msgKv['registrierePrivatkunde.title']}"/>
		
			<ui:define name="main">
				<h1>#{msgKv['registrierePrivatkunde.heading']}</h1>
		
				<r:messages id="fehlermeldungGobal" globalOnly="true"/>
				<r:notifyMessages id="notifyMessages" stayTime="2000" nonblocking="true"/>
		
				<form jsf:id="registriereForm" jsf:prependId="false">
					<r:graphValidator id="kundeValidator" value="#{kundeModel.neuerPrivatkunde}">
						<r:messages id="fehlermeldungKundeValidator" for="kundeValidator"/>
						<r:messages id="fehlermeldungGlobal" globalOnly="true"/>
					
						<h:panelGrid id="registriereTabelle" columns="3">
							<label id="nachnameLabel" for="nachname">#{msgKv['registrierePrivatkunde.nachname']}</label>
							<input jsf:id="nachname" type="text" autofocus="autofocus" jsf:value="#{kundeModel.neuerPrivatkunde.nachname}">
								<!-- Validierung durch Javascript mit RichFaces -->
								<r:validator oninvalid="$(#{r:element('nachname')}).addClass('invalid')"
	                                         onvalid="$(#{r:element('nachname')}).removeClass('invalid')"/>
								<!-- Validierung durch Ajax mit JSF -->
								<!--
								<f:ajax event="blur" render="fehlermeldungenNachname"/>
								-->
							</input>
							<r:messages id="fehlermeldungenNachname" for="nachname"/>
				
							<label id="vornameLabel" for="vorname">#{msgKv['registrierePrivatkunde.vorname']}</label>
							<input jsf:id="vorname" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.vorname}"/>
							<f:verbatim/>
							
							<label id="kategorieLabel" for="kategorie_input">#{msgKv['registrierePrivatkunde.kategorie']}</label>
							<r:inputNumberSlider id="kategorie"
							                     value="#{kundeModel.neuerPrivatkunde.kategorie}"
							                     minValue="0"
							                     maxValue="5"
							                     maxlength="1"
							                     inputSize="1"/>
							<f:verbatim/>
							
							<label id="seitLabel" for="seitInputDate">#{msgKv['registrierePrivatkunde.seit']}</label>
							<r:calendar id="seit"
							            datePattern="#{msgKv['registrierePrivatkunde.calendar.pattern']}"
							            value="#{kundeModel.neuerPrivatkunde.seit}"
							            locale="#{locale}"
							            timeZone="#{s:timeZone('Europe/Berlin')}">
							    <!-- https://issues.jboss.org/browse/RF-10224
								<r:validator/>
								-->
								<f:ajax event="change" render="fehlermeldungenSeit"/>
								<r:placeholder id="seitPlaceholder" value="#{msgKv['registrierePrivatkunde.seit.placeholder']}" />
							</r:calendar>
							<r:messages id="fehlermeldungenSeit" for="seit"/>
							
							<label id="umsatzLabel" for="umsatz">#{msgKv['registrierePrivatkunde.umsatz']}</label>
							<input jsf:id="umsatz" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.umsatz}" jsf:converterMessage="#{msgKv['registrierePrivatkunde.umsatz.convert']}" placeholder="#{msgKv['registrierePrivatkunde.umsatz.placeholder']}">
							    <f:convertNumber type="currency" currencyCode="EUR" maxFractionDigits="2"/>
								<f:ajax event="blur" render="fehlermeldungenUmsatz"/>
								<!-- https://issues.jboss.org/browse/RF-10224
								<r:validator/>
								-->
							</input>
							<r:messages id="fehlermeldungenUmsatz" for="umsatz"/>
							
							<!-- Konvertierung in % funktioniert nicht: -->
							<!--    Dezimalpunkt statt Dezimalkomma erforderlich -->
							<!--    Kein Blank zwischen Betrag und % -->
							<!--    aus 0.3% wird 3% -->
							<!--
							<label id="rabattLabel" for="rabatt">#{msgKv['registrierePrivatkunde.rabatt']}</label>
							<input jsf:id="rabatt" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.rabatt}" jsf:converterMessage="#{msgKv['registrierePrivatkunde.rabatt.convert']}" placeholder="#{msgKv['registrierePrivatkunde.rabatt.placeholder']}">
								<f:convertNumber type="percent" maxIntegerDigits="2" maxFractionDigits="2"/>
								<f:ajax event="blur" render="fehlermeldungenRabatt"/>
							</input>
							<r:messages id="fehlermeldungenRabatt" for="rabatt"/>
							-->
				
							<label id="familienstandLabel" for="familienstandInput">#{msgKv['registrierePrivatkunde.familienstand']}</label>
							<r:select id="familienstand"
							          enableManualInput="true"
							          defaultLabel="#{msgKv['registrierePrivatkunde.familienstand']}"
							          value="#{kundeModel.neuerPrivatkunde.familienstand}">
								<f:selectItem id="ledig" itemValue="LEDIG" itemLabel="#{msgKv['registrierePrivatkunde.familienstand.ledig']}"/>
								<f:selectItem id="verheiratet" itemValue="VERHEIRATET" itemLabel="#{msgKv['registrierePrivatkunde.familienstand.verheiratet']}"/>
								<f:selectItem id="geschieden" itemValue="GESCHIEDEN" itemLabel="#{msgKv['registrierePrivatkunde.familienstand.geschieden']}"/>
								<f:selectItem id="verwitwet" itemValue="VERWITWET" itemLabel="#{msgKv['registrierePrivatkunde.familienstand.verwitwet']}"/>
							</r:select>
							<f:verbatim/>
							
							<label id="geschlechtLabel">#{msgKv['registrierePrivatkunde.geschlecht']}</label>
							<h:selectOneRadio id="geschlecht" value="#{kundeModel.neuerPrivatkunde.geschlecht}">
								<f:selectItem id="weiblich" itemValue="WEIBLICH" itemLabel="#{msgKv['registrierePrivatkunde.geschlecht.weiblich']}"/>
								<f:selectItem id="maennlich" itemValue="MAENNLICH" itemLabel="#{msgKv['registrierePrivatkunde.geschlecht.maennlich']}"/>
							</h:selectOneRadio>
							<f:verbatim/>
							
							<label id="newsletterLabel" for="newsletter">#{msgKv['registrierePrivatkunde.newsletter']}</label>
							<input jsf:id="newsletter" type="checkbox" jsf:value="#{kundeModel.neuerPrivatkunde.newsletter}"/>
							<f:verbatim/>
			
							
							<label id="hobbiesLabel">#{msgKv['registrierePrivatkunde.hobbies']}</label>
							<h:selectManyCheckbox id="hobbies" value="#{kundeModel.hobbies}"
							                      layout="pageDirection">
								<f:selectItem id="sport" itemValue="SPORT"
											  itemLabel="#{msgKv['registrierePrivatkunde.sport']}"/>
								<f:selectItem id="lesen" itemValue="LESEN" 
											  itemLabel="#{msgKv['registrierePrivatkunde.lesen']}"/>
								<f:selectItem id="reisen" itemValue="REISEN" 
											  itemLabel="#{msgKv['registrierePrivatkunde.reisen']}"/>
							</h:selectManyCheckbox>
							<f:verbatim/>
											
							<label id="emailLabel" for="email">#{msgKv['registrierePrivatkunde.email']}</label>
							<input jsf:id="email" type="email" jsf:value="#{kundeModel.neuerPrivatkunde.email}">
								<r:validator oninvalid="$(#{r:element('email')}).addClass('invalid')"
	                                         onvalid="$(#{r:element('email')}).removeClass('invalid')"/>
							</input>
							<r:messages id="fehlermeldungEmail" for="email"/>
			
							<label id="passwordLabel" for="password">#{msgKv['registrierePrivatkunde.password']}</label>
							<input jsf:id="password" type="password" jsf:value="#{kundeModel.neuerPrivatkunde.password}" jsf:redisplay="true"/>
							<f:verbatim/>
							
							<label id="passwordWdhLabel" for="passwordWdh">#{msgKv['registrierePrivatkunde.passwordWdh']}</label>
							<input jsf:id="passwordWdh" type="password" jsf:value="#{kundeModel.neuerPrivatkunde.passwordWdh}" jsf:redisplay="true"/>
							<f:verbatim/>
			
							<label id="plzLabel" for="plz">#{msgKv['registrierePrivatkunde.plz']}</label>
							<input jsf:id="plz" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.adresse.plz}">
								<r:validator oninvalid="$(#{r:element('plz')}).addClass('invalid')"
	                                            onvalid="$(#{r:element('plz')}).removeClass('invalid')"/>
							</input>
							<r:messages id="fehlermeldungPlz" for="plz"/>
							
							<label id="ortLabel" for="ort">#{msgKv['registrierePrivatkunde.ort']}</label>
							<input jsf:id="ort" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.adresse.ort}">
								<r:validator oninvalid="$(#{r:element('ort')}).addClass('invalid')"
	                                         onvalid="$(#{r:element('ort')}).removeClass('invalid')"/>
							</input>
							<r:messages id="fehlermeldungOrt" for="ort"/>
							
							<label id="strasseLabel" for="strasse">#{msgKv['registrierePrivatkunde.strasse']}</label>
							<input jsf:id="strasse" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.adresse.strasse}">
								<r:validator oninvalid="$(#{r:element('strasse')}).addClass('invalid')"
	                                         onvalid="$(#{r:element('strasse')}).removeClass('invalid')"/>
							</input>
							<r:messages id="fehlermeldungStrasse" for="strasse"/>
							
							<label id="hausnrLabel" for="hausnr">#{msgKv['registrierePrivatkunde.hausnr']}</label>
							<input jsf:id="hausnr" type="text" jsf:value="#{kundeModel.neuerPrivatkunde.adresse.hausnr}"/>
							<f:verbatim/>
														
							<label id="agbLabel" for="agb">#{msgKv['registrierePrivatkunde.agb']}</label>
							<input jsf:id="agb" type="checkbox" jsf:value="#{kundeModel.neuerPrivatkunde.agbAkzeptiert}">
								<r:validator/>
							</input>
							<r:message id="fehlermeldungAgb" for="agb"/>
							
							<r:mediaOutput id="captcha"
							               element="img"
							               cacheable="false"
							               createContent="#{captcha.paint}"
							               mimeType="image/png"/>
							<span jsf:id="captchaInputGroup">
								<label id="captchaLabel" for="captchaInput">#{msgKv['registrierePrivatkunde.captcha.label']}</label>
								<br/>
								<input jsf:id="captchaInput" type="text" jsf:value="#{kundeModel.captchaInput}"/>
							</span>
							<r:message id="fehlermeldungCaptcha" for="captchaInput"/>
						</h:panelGrid>
			
						<p id="buttons">
							<input jsf:id="createSubmit" type="submit" jsf:action="#{kundeModel.registrierePrivatkunde}" value="#{msgKv['registrierePrivatkunde.submit']}"/>
							#{' '}
							<input id="reset" type="reset" value="#{msgKv['registrierePrivatkunde.reset']}"/>
						</p>
					</r:graphValidator>
				</form>
				
				<p id="hinweisPflichtfelder">
					#{msgKv['registrierePrivatkunde.required']}
				</p>
			</ui:define>
		</ui:composition>
	</body>
</html>
